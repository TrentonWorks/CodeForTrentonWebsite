<!DOCTYPE html>
<html lang="en">
<head>
    <title>Menus of Trenton | Code for Trenton</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic'>
	<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.11/css/jquery.dataTables.min.css">
        <script type="text/javascript" language="javascript" src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
        <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script type="text/javascript" language="javascript" src="//cdn.datatables.net/1.10.11/js/jquery.dataTables.min.js"></script>
</head>

<body>
    <header class="transition" data-home="true">
            
        <a href="http://www.codefortrenton.org/" class="logo">Code for Trenton</a>
        
        <nav>
                    <a href="../about.html">About</a>
                      <a href="../index.html#proj">Projects</a>
                      <a href="../#join">Contact</a>
                 
            </nav>
    </header>
	
    <div class="welcome">
		<div class="intro">
        	<h1>Menus of Trenton</h1>
		</div>
    </div>
	
	
    <div class="about">
        <div class="row">
            <h1>Welcome to Menus of Trenton</h1>
            <p>a one-stop-shop for everything you need to eat deliciously in the city.</p>
			<p><strong>For visitors:</strong> check the links in the map-markers below, view up-to-date menus, and read real local reviews.</p>
			<p><strong>For restaurant owners &amp; operators:</strong> we'll get you on Yelp, Facebook, and get your menu on our ever-growing list right here. Just <a href="mailto:team@codefortrenton.org">email us at team@codefortrenton.org</a> or text 'menu' to 609.337.3353 to get started!</p>   
		</div>       
	</div>
	
    <div class="about">
        <div class="row">
            <div>
				<iframe width="100%" height="520" frameborder="0" src="https://codefortrenton.cartodb.com/viz/2ae96dd0-cf10-11e5-81e9-0ef7f98ade21/embed_map" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
			</div>
			<div style="height:15px;"></div>
			<hr>
			<div style="height:15px;"></div>
			<div style="max-width:900px;">
				<table class="paginated" id="restaurantsTable">
					<thead>
						<tr>
							<th class="col">Name</th><th class="col">Location</th><th class="col">Phone</th><th class="col">Reviews</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
	
				</table>
			</div>
			   
		</div>       
	</div>
    
	<div class="mailing">
		<div class="form" style="text-align:center;margin:0 auto;">  
			<!-- <h2>Join our mailing list for updates at <a href="../#join">CodeForTrenton.org</a></h2> -->
			<h2 style="padding:0 0 1.2em 0;">Join our mailing list for updates</h2>
			<!-- Begin MailChimp Signup Form -->
			<link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
			<style type="text/css">
				#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
				/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
				   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
			</style>
			<div id="mc_embed_signup">
			<form action="//codefortrenton.us12.list-manage.com/subscribe/post?u=00c4ca3a47a2a110f6efe9cee&amp;id=8d80365253" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
			    <div id="mc_embed_signup_scroll">
	
			<div class="mc-field-group">
				<label for="mce-PERSONNAME">Name </label>
				<input type="text" value="" name="PERSONNAME" class="required" id="mce-PERSONNAME">
			</div>
			<div class="mc-field-group">
				<label for="mce-EMAIL">Email Address </label>
				<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
			</div>
				<div id="mce-responses" class="clear">
					<div class="response" id="mce-error-response" style="display:none"></div>
					<div class="response" id="mce-success-response" style="display:none"></div>
				</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
			    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_00c4ca3a47a2a110f6efe9cee_8d80365253" tabindex="-1" value=""></div>
			    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
			    </div>
			</form>
			</div>
			<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[4]='PERSONNAME';ftypes[4]='text';fnames[0]='EMAIL';ftypes[0]='email';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
			<!--End mc_embed_signup-->
			
		</div>
	</div>
	
    
    <script>
    $(document).ready(function(){       
   var scroll_start = 0;
   var startchange = $('.about');
   var offset = startchange.offset();
    if (startchange.length){
   $(document).scroll(function() { 
      scroll_start = $(this).scrollTop();
      if(scroll_start > offset.top) {
          $("header").css({'background-color': '#1e1e1e', opacity: .95});
       } else {
          $('header').css('background-color', 'transparent');
       }
   });
    }
});

//var url = "http://live-codefortrenton.pantheon.io/api/action/datastore/search.jsonp?resource_id=c912e749-4cb7-4209-9c3b-c96706e6934c&limit=200";
var url = "http://live-codefortrenton.pantheon.io/api/action/datastore/search.jsonp?resource_id=24a9755d-1e98-4317-a6fe-8ef690fd8e50&limit=200";

/*
$.getJSON(pages).done(function(pageData){
	var pages = pageData["results"];
	var page = pages[2];
	$('#dataname').text(page.url + " | " + page.name);
});
*/

$.ajax( url, {
	dataType:'jsonp',
	crossDomain: true,
	jsonpCallback:'gatherData'
});
function gatherData( data ) {
	/*
	$.each(data.result.records, function() {
		$.each(this, function(index, element) {
			var $new_row = "<tr><td>"+element.Name+"</td><td>"+element.Street+"</td><td>"+element.Phone+"</td></tr>";
			$('#myTable').append($new_row);
		});
	});
	*/
	
	for(var key in data.result.records) {
	    if(data.result.records.hasOwnProperty(key)) {
			var e	= data.result.records[key];	// e is for element :D
			var $new_row = "<tr><td>"+e.Name+'</td><td><a href="https://www.google.com/maps/place/'+e.Street+', '+e.City+' '+e.State+' '+e.Zip+'/@'+e.Latitude+","+e.Longitude+',16z">'+e.Street+"</a></td><td>";
			if(e.Phone != "blank") {
				$new_row = $new_row + '<a href="tel:'+e.Phone+'">'+e.Phone+"</a>";
			} else {
				$new_row = $new_row + e.Phone;
			}
			$new_row = $new_row + "</td><td>";
			if (e.HiddenTrenton != "blank") {
				$new_row = $new_row + '<a href="'+e.HiddenTrenton+'"><img class="hiddentrenton-img" style="height:1.2em;width:1.2em;margin-right:2px;" src="../img/hidden.png" /></a>';
			}
			if (e.Yelp != "blank") {
				$new_row = $new_row + '<a href="'+e.Yelp+'"><img class="yelper-img" style="height:1.2em;width:2.2em;margin-right:2px;" src="../img/yelper.png" /></a>';
			}
			$new_row = $new_row + "</td></tr>";
			$('#restaurantsTable').append($new_row);
	    }
	}
	
	$('#restaurantsTable').DataTable({ "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]] });
	}
    </script>
    
</body>
</html>